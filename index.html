<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8"/>
<title>상명서점 통합 버전</title>
<style>

    

    .wrap { width:700px; min-height:600px; margin: 0 auto; background-color: white;}
    header { height: 80px; }
    nav { width: 700px; }
    nav a { height:20px; }
    footer { height:70px; }
    

    .content-area { width: 520px; min-height: 500px; float: left; margin: 5px; } 


    body { margin:0; padding:0; font-size: 0.75em; line-height: 1.2em; background-color: gray; }
    header { vertical-align: middle; }
    .left { float: left; }
    .right { float: right; }
    #logo { float: left; vertical-align: middle; margin:30px 0 0 20px; }
    .clear { clear:both; }
    hr { clear: both; }
    nav { margin:0 0 20px 0; float:left; background-color: aqua; } 
    nav ul { list-style:none; padding: 0; margin: 0; }
    nav ul li { float:left; margin:0 5px; }
    nav a { display:block; padding:5px; }
    footer #copyright { margin:20px 0 0 10px; float:left; }
    footer #SNS { margin:10px 20px 0 0 ; float:right; }
    aside { margin: 5px; width: 150px; float: right; }
    article { margin:5px 0 10px 0; } 
    
    img { border:none; }
    a { text-decoration: none; }
    #logo { color: darkblue; font-size: 48px; }
    header .right a:hover { color: gray; }
    nav ul { font-family: Verdana, Geneva, sans-serif; font-size: 14px; font-weight: bold; color: #ff0099; }
    nav a { text-decoration:none; color:#000000; border: 1px solid transparent; }
    nav a:hover { color:#2b4480; border-color: blue; }
    footer #copyright { font-family: consolas; } 
    
    .booklist { font-family: arial; background-color: #f0f0f0; padding: 10px; border:solid 3px steelblue; border-radius:10px; overflow: hidden; }
    .booklist .head { font-size: 16px; font-weight: bolder; margin-bottom: 10px; }
    .booklist ul { padding: 0; margin: 0; }
    .booklist ul li { float: left; margin: 5px; list-style-type: none; width: 140px; height: 220px; font-size: 12px; text-align: center; }
    .booklist ul li img { width: 100px; height: 140px; border: 1px solid lightgray; }
    .clear-fix { clear: both; }

    fieldset { margin-bottom: 10px; background-color: #d8d8d8; padding: 20px; }
    fieldset span { display: inline-block; width: 100px; }
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid silver; padding: 5px; text-align: center; }
    
    .multimedia-box {
        position: relative; width: 100%; height: 400px;
        background-color: #eee;
        border: 3px solid #6699cc; border-radius: 15px;
        padding: 20px; box-sizing: border-box; text-align: center;
    }
    .video-wrapper {
        background: rgba(0,0,0,0.6); padding: 15px; border-radius: 10px;
        display: inline-block; margin-top: 20px; color: white;
    }
</style>

<script>

    var books = [
        { title:"컴퓨터와 IT기술의 이해", price:"27,000원", img:"images/book1.jpg" },
        { title:"소셜미디어의 이해와 활용", price:"21,000원", img:"images/book5.jpg" }, 
        { title:"멀티미디어 배움터 2.0", price:"25,000원", img:"images/book6.jpg" },   
        { title:"HTML5 웹프로그래밍 입문", price:"28,000원", img:"images/book2.jpg" }, 
        { title:"Understanding Computers", price:"35,000원", img:"images/fbook1.jpg" }, 
        { title:"Discovering Computers", price:"32,000원", img:"images/fbook2.jpg" },   
        { title:"What is HTML5?", price:"15,000원", img:"images/fbook3.jpg" },          
        { title:"JavaScript: The Good Parts", price:"18,000원", img:"images/fbook4.jpg" } 
    ];

    window.onload = function() {
        checkLoginStatus();
        renderBooks('all'); 
    }

    function checkLoginStatus() {
        var userId = localStorage.getItem("user");
        var loginArea = document.getElementById("login_area");
        if(userId) {
            loginArea.innerHTML = "<b>" + userId + "</b>님 환영합니다 | <a href='#' onclick='logout()'>로그아웃</a>";
        } else {
            loginArea.innerHTML = "<a href='#' onclick=\"renderLogin()\">로그인</a> | <a href='#' onclick=\"renderSignup()\">회원가입</a>";
        }
    }

    function logout() {
        localStorage.removeItem("user");
        alert("로그아웃 되었습니다.");
        checkLoginStatus();
        renderBooks('all');
    }

    function doLogin() {
        var id = document.getElementById("username").value;
        if(id == "") {
            alert("아이디를 입력하세요.");
            return;
        }
        localStorage.setItem("user", id);
        alert(id + "님 로그인 되었습니다.");
        checkLoginStatus();
        renderBooks('all'); 
    }

    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(pos) {
                alert("현재 위치\n위도: " + pos.coords.latitude.toFixed(4) + "\n경도: " + pos.coords.longitude.toFixed(4));
            }, function(error) {
                alert("위치 정보를 가져올 수 없습니다.");
            });
        } else {
            alert("이 브라우저는 Geolocation을 지원하지 않습니다.");
        }
    }

    function setContent(html) {
        document.getElementById("display_area").innerHTML = html;
    }


    function renderBooks(mode) {
        var title = "";
        var html = "<div class='booklist'>";
        
        function makeItem(b) {
            return "<li><img src='"+b.img+"' alt='표지' onerror=\"this.src='https://via.placeholder.com/100x140?text=No+Image'\"><br><strong>"+b.title+"</strong><br>"+b.price+"</li>";
        }

        if (mode === 'all') {
            title = "전체 도서 목록";
            html += "<div class='head'>" + title + "</div><ul>";
            for(var i=0; i < books.length; i++) html += makeItem(books[i]);
            html += "</ul>";
        } else if (mode === 'kor') {
            title = "국내 도서";
            html += "<div class='head'>" + title + "</div><ul>";
            for(var i=0; i<=3; i++) html += makeItem(books[i]);
            html += "</ul>";
        } else if (mode === 'for') {
            title = "해외 번역 도서";
            html += "<div class='head'>" + title + "</div><ul>";
            for(var i=4; i<=7; i++) html += makeItem(books[i]);
            html += "</ul>";
        } else if (mode === 'best') {
            title = "베스트셀러";
            html += "<div class='head'>" + title + "</div>";
            html += "<h3>국내 베스트셀러</h3><ul>";
            for(var i=0; i<=2; i++) html += makeItem(books[i]);
            html += "</ul><div class='clear-fix'></div><hr>";
            html += "<h3>해외 베스트셀러</h3><ul>";
            for(var i=4; i<=6; i++) html += makeItem(books[i]);
            html += "</ul>";
        } else if (mode === 'rec') {
            title = "이달의 추천 도서";
            html += "<div class='head'>" + title + "</div><ul>";
            html += makeItem(books[3]); 
            html += makeItem(books[7]); 
            html += "</ul>";
        }
        
        html += "<div class='clear-fix'></div></div>";
        setContent(html);
    }

    // 2. 로그인 화면 렌더링
    function renderLogin() {
        var html = `
            <div id="login">
                <h2>로그인</h2>
                <form onsubmit="return false;">    
                  <fieldset>
                    <span>사용자 아이디</span>
                    <input id="username" type="text"/><br/><br/>
                    <span>비밀번호</span>
                    <input id="password" type="password"><br/><br/>
                    <input type="submit" value="로그인" onclick="doLogin()"/>
                    <input type="reset" value="취소" onclick="renderBooks('all')"/>
                  </fieldset>
                </form> 
            </div>`;
        setContent(html);
    }

    // 3. 회원가입 화면 렌더링
    function renderSignup() {
        var html = `
            <div id="signup">
                <form>    
                  <fieldset>
                    <legend>회원가입</legend>
                    <span>사용자 아이디</span> <input type="text"/> <button disabled>중복체크</button><br/>
                    <span>비밀번호</span> <input type="password"><br/>
                    <span>이름</span> <input type="text"><br/>
                    <span>관심분야</span>
                    <label>컴퓨터 <input type="checkbox"></label> <label>예술 <input type="checkbox"></label><br/><br/>
                    <textarea cols="40" rows="3">간단한 자기소개를 써 주세요.</textarea>
                  </fieldset>
                  <input type="button" value="가입하기 (기능미구현)" disabled/>
                  <input type="button" value="취소" onclick="renderBooks('all')"/>
                </form> 
            </div>`;
        setContent(html);
    }

    // 4. 주문 화면 렌더링 (order.html 로직 통합)
    function renderOrder() {
        var user = localStorage.getItem("user");
        var title = user ? user + "님의 주문 내역입니다" : "서적 주문 양식";
        
        var html = `
            <div id="order">
                <div class="head">${title}</div>
                <form>
                    <p> 주문서 </p>
                    <table>
                        <tr> <th> 책 제목 </th> <th> 가격 </th> <th> 수량 </th> <th> 합계 </th> </tr>
                        <tr>
                            <td> 컴퓨터와 IT기술의 이해 </td> <td> 27,000원 </td>
                            <td> <input type="number" id="q1" style="width:50px" value="0" onkeyup="calcOrder()" onclick="calcOrder()"/> </td>
                            <td> <input type="text" id="s1" size="8" value="0" readonly/> 원</td>
                        </tr>
                        <tr>
                            <td> 소셜미디어의 이해와 활용 </td> <td> 21,000원 </td>
                            <td> <input type="number" id="q2" style="width:50px" value="0" onkeyup="calcOrder()" onclick="calcOrder()"/> </td>
                            <td> <input type="text" id="s2" size="8" value="0" readonly/> 원</td>
                        </tr>
                        <tr>
                            <td> 비즈니스 정보 시스템 </td> <td> 28,000원 </td>
                            <td> <input type="number" id="q3" style="width:50px" value="0" onkeyup="calcOrder()" onclick="calcOrder()"/> </td>
                            <td> <input type="text" id="s3" size="8" value="0" readonly/> 원</td>
                        </tr>
                        <tr>
                            <td> 합계 </td> <td> - </td> <td> - </td>
                            <td> <input type="text" id="total" size="8" value="0" readonly style="color:red; font-weight:bold;"/> 원</td>
                        </tr>
                    </table> <br />
                    <input type="button" value="주문하기" onclick="submitOrder()"/>
                </form>
                <div id="order_result"></div>
            </div>`;
        setContent(html);
    }

    function calcOrder() {
        var prices = [27000, 21000, 28000];
        var total = 0;
        for(var i=1; i<=3; i++) {
            var q = document.getElementById("q"+i).value;
            if(q == "") q = 0;
            var sum = prices[i-1] * parseInt(q);
            document.getElementById("s"+i).value = sum.toLocaleString();
            total += sum;
        }
        document.getElementById("total").value = total.toLocaleString();
    }

    function submitOrder() {
        var t = document.getElementById("total").value;
        if(t == "0" || t == "") {
            alert("상품을 선택해주세요.");
        } else {
            var res = document.getElementById("order_result");
            res.innerHTML = "<h3>주문 내역</h3>총 결제 금액: <strong>" + t + "원</strong>";
            res.style.border = "2px solid blue";
            res.style.padding = "10px";
            res.style.marginTop = "10px";
        }
    }

    function renderMusic() {
        var html = `
            <div class="booklist">
              <div class="head">음반/DVD</div>
              <br>
              <div class="multimedia-box">
                  <div class="video-wrapper">
                      <video id="myVideo" src="images/video.mp4" width="400" height="250" style="background:black;"></video>
                      <div class="controls" style="text-align:left; margin-top:10px;">
                          <button id="playBtn" style="color:black;">▶ 재생</button>
                          <span id="timeDisplay" style="margin:0 10px;">0 / 0</span>
                          <span style="float:right;">Vol <input type="range" id="volRange" min="0" max="1" step="0.1" value="1"></span>
                      </div>
                  </div>
              </div>
            </div>`;
        setContent(html);

        // 비디오 이벤트 리스너 등록 (HTML 주입 후 실행해야 함)
        setTimeout(function() {
            var myVideo = document.getElementById("myVideo");
            var playBtn = document.getElementById("playBtn");
            var timeSpan = document.getElementById("timeDisplay");
            var volCtrl = document.getElementById("volRange");

            if(myVideo && playBtn) {
                playBtn.onclick = function() {
                    if (myVideo.paused) {
                        myVideo.play();
                        playBtn.innerHTML = "|| 일시정지";
                    } else {
                        myVideo.pause();
                        playBtn.innerHTML = "▶ 재생";
                    }
                };
                myVideo.ontimeupdate = function() {
                    var cur = Math.floor(myVideo.currentTime);
                    var tot = Math.floor(myVideo.duration);
                    if (isNaN(tot)) tot = 0;
                    timeSpan.innerHTML = cur + " / " + tot;
                };
                volCtrl.onchange = function() {
                    myVideo.volume = volCtrl.value;
                };
            }
        }, 100);
    }
</script>
</head>

<body>
<div class="wrap">
    <header>
        <a id="logo" href="#" onclick="renderBooks('all')"> 상명 서점 </a>
        <span class="right" id="login_area" style="padding: 30px 10px;">
            </span>
    </header>

    <nav>
        <ul>
            <li><a href="#" onclick="renderBooks('kor')">국내도서</a></li>
            <li><a href="#" onclick="renderBooks('for')">해외번역도서</a></li>
            <li><a href="#" onclick="renderMusic()">음반/DVD</a></li>
            <li class="right"><a href="#" onclick="renderOrder()">주문하기</a></li>
        </ul>
    </nav>

    <hr/>

    <article class="content-area left" id="display_area">
        </article>

    <aside class="right">
        <button style="width:85px; cursor:pointer; margin-bottom:5px;" onclick="renderBooks('all')">전체</button><br/>
        <button style="width:85px; cursor:pointer; margin-bottom:5px;" onclick="renderBooks('best')">베스트셀러</button><br/>
        <button style="width:85px; cursor:pointer; margin-bottom:5px;" onclick="renderBooks('rec')">추천도서</button><br/>
        <button style="width:85px; display:none;">메모하기</button><br/>
        <button style="width:85px; cursor:pointer;" onclick="getLocation()">현재위치</button>
    </aside>

    <hr/>

    <footer>  
       <div id="copyright">
           Copyright (c) 2025 SM Bookstore Inc. All rights reserved
       </div>
       <div id="SNS">
           <a href="#"><img src="images/facebook.png" height="32" alt="F"></a>
           <a href="#"><img src="images/twitter.png" height="32" alt="T"></a>
           <a href="#"><img src="images/googleplus-icon.png" height="32" alt="G"></a>
           <a href="#"><img src="images/github.png" height="32" alt="Git"></a>
        </div>
    </footer>
</div>
</body>
</html>
